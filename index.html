<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
	<title>LOGIN | Junto</title>
	<!-- start:bootstrap v3.2.0 -->
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<!-- start:font awesome v4.1.0 -->
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <!-- start:bootstrap reset -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap-reset.css">
	<!-- start:style arjuna -->
	<link rel="stylesheet" type="text/css" href="css/arjuna.css">
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.3.0.min.js"></script>
</head>
<body class="cl-default fixed" id="login">

    <!-- start:wrapper -->
    <div class="header-login">
    	<div class="text-center">
    		<h1><i class="fa fa-pied-piper-alt"></i> Junto</h1>
    	</div>
    </div>

    <div class="body-login">
    	<div class="alert alert-dismissible alert-warning alert-login hidden" role="alert">
		  	<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
		  	<strong>Warning!</strong> Better check yourself, you're not looking too good.
		</div>
    	<form role="form" method="post">
		  	<div class="form-group">
		    	<input type="email" class="form-control input-lg" id="email" name="email" placeholder="Enter email">
		  	</div>
		  	<div class="form-group">
		    	<input type="password" class="form-control input-lg" id="password" placeholder="Enter Password">
		  	</div>
		  	<div class="checkbox">
		    	<label>
		      	<input type="checkbox"> Remember me
		    	</label>
		  	</div>
		  	<button type="submit" class="btn btn-default btn-block btn-lg btn-perspective" id="loginUser">LOGIN</button>
		</form>
		<div class="text-center">
			<p><a href="forgot-password.html"><strong>Forgot your password?</strong></a></p>
			<p>or</p>
			<p><a href="create.html"><strong>Create new account</strong></a></p>
		</div>
    </div>	
	
	

  <script type="text/javascript">
    Parse.initialize("biMGnMGZKMRqeZFLXZDFQP84ln8gKqPzj0oV71TM", "B2422y5nyMJsGZF4K6GzAiTFJgwTZkHhOpcZ8Ovj");

    	var currentUser = Parse.User.current();
	if (currentUser) {
		window.location.replace("pages/main.php");
	}
	else {
		// none. 
	}
	//var sessionToken = Parse.User.current()._sessionToken;

    
    $("#loginUser").click(function(event) {
    	event.preventDefault();

    	//alert("made it to the click");
    	var userEmail = $("#email").val();
    	var userPass = $("#password").val();
    	
    	Parse.User.logIn(userEmail, userPass, {
    		success: function(user) {
    			//alert("success");
				Parse.User.become(user._sessionToken).then(function (user) {
				//	console.log(Parse.User.current());
			 	 window.location.href("pages/temp-main.php");
				 }, function (error) {
				  console.log(error);
				});
    			
    		},
    		error: function(error) {
    			//alert("failure");
    			console.log(error);
    		}
    		//event.preventDefault();
    	})

	   /* var user = new Parse.User();
		user.set("username", userEmail);
		user.set("password", userPass);
		//user.set("email", "email@example.com");
	 	
		// other fields can be set just like with Parse.Object
		//user.set("phone", "415-392-0202");
	 	
		user.signUp(null, {
	 	 success: function(user) {
	    	// Hooray! Let them use the app now.
	    	window.location("pages/main.php");
	    	},
	     error: function(user, error) {
	     	window.location.replace("pages/main.php");
	     	
	    	// Show the error message somewhere and let the user try again
	    	//alert("Error: " + error.code + " " + error.message);
			}
		});
*/
	});


    
	
	
	
    
  </script>
    <!-- end:wrapper -->

	<!-- start:javascript for all pages -->
		<!-- start:jquery -->
		<script src="js/jquery-1.11.1.min.js"></script>
		<!-- start:bootstrap -->
		<script src="js/bootstrap.min.js"></script>
		<!-- start:arjuna.js -->
		<script src="js/arjuna.js"></script>
	<!-- end:javascript for all pages-->

</body>
</html>